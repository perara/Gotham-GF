!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b,c){d(a,f,b,c),"DOMMouseScroll"==f&&d(a,"MozMousePixelScroll",b,c)}function d(a,b,c,d){a[e](g+b,"wheel"==f?c:function(a){!a&&(a=window.event);var b={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};return"mousewheel"==f?(b.deltaY=-1/40*a.wheelDelta,a.wheelDeltaX&&(b.deltaX=-1/40*a.wheelDeltaX)):b.deltaY=a.detail,c(b)},d||!1)}b.exports=c;var e,f,g="";window.addEventListener?e="addEventListener":(e="attachEvent",g="on"),f="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],2:[function(){Array.prototype.remove=function(){var a,b,c,d;for(d=void 0,b=arguments,a=b.length,c=void 0;a&&this.length;)for(d=b[--a];-1!==(c=this.indexOf(d));)this.splice(c,1);return this},Array.prototype.last=function(){return this[this.length-1]}},{}],3:[function(){PIXI.DisplayObjectContainer.prototype.onWheelScroll=function(){},PIXI.DisplayObjectContainer.prototype.bringToFront=function(){var a;return this.parent?(a=this.parent,a.removeChild(this),a.addChild(this)):void 0},PIXI.DisplayObjectContainer.prototype.onInteractiveChange=null,PIXI.DisplayObjectContainer.prototype.setInteractive=function(a){var b,c,d;for(this.onInteractiveChange&&this.onInteractiveChange(a),c=[],c.push(this),d=[];c.length>0;)b=c.pop(),c.push.apply(c,b.children),b.interactive=a,a?(b.click=b.__click,b.mousedown=b.__mousedown,b.mouseup=b.__mouseup,b.__click=null,b.__mousedown=null,d.push(b.__mouseup=null)):(b.__click=b.click,b.__mousedown=b.mousedown,b.__mouseup=b.mouseup,b.click=null,b.mousedown=null,d.push(b.mouseup=null));return d},PIXI.DisplayObjectContainer.prototype.addChildArray=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addChild(b));return e},PIXI.DisplayObjectContainer.prototype.setPanning=function(a){var b,c,d,e,f;return f=this,c=f.parent,c.interactive=!0,b=!1,d=void 0,e=void 0,f.offset={x:0,y:0},f.diff={x:0,y:0},c.mousedown=function(a){var c;return c=a.global,d=c.x,e=c.y,b=!0},c.mouseup=function(){return b=!1},c.mouseout=function(){return b=!1},c.mousemove=function(c){var g,h,i;if(b)return h=c.global,f.diff.x=h.x-d,f.diff.y=h.y-e,g={x:f.position.x+f.diff.x,y:f.position.y+f.diff.y},i=a(g),i.x&&(f.position.x=g.x,d=h.x),i.y?(f.position.y=g.y,e=h.y):void 0}}},{}],4:[function(){Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c,d,e,f;e=this[a],d=e,c=function(){return d},f=function(c){return e=d,d=b.call(this,a,e,c)},delete this[a]&&Object.defineProperty(this,a,{get:c,set:f,enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b;b=this[a],delete this[a],this[a]=b}})},{}],5:[function(a){var b;b=a("../Dependencies/mozAddWheelListener"),PIXI.WebGLRenderer.prototype.wheelScrollObjects=[],PIXI.WebGLRenderer.prototype.addWheelScrollObject=function(a){return this.wheelScrollObjects.push(a)},PIXI.WebGLRenderer.prototype.setWheelScroll=function(a){return null==a?b(this.view,function(){}):b(this.view,function(a){var b,c,d,e,f;for(e=PIXI.WebGLRenderer.prototype.wheelScrollObjects,f=[],b=0,c=e.length;c>b;b++)d=e[b],f.push(d.onWheelScroll(a));return f})},PIXI.CanvasRenderer.prototype.wheelScrollObjects=[],PIXI.CanvasRenderer.prototype.addWheelScrollObject=function(a){return this.wheelScrollObjects.push(a)},PIXI.CanvasRenderer.prototype.setWheelScroll=function(a){return null==a?b(this.view,function(){}):b(this.view,function(a){var b,c,d,e,f;for(e=PIXI.CanvasRenderer.prototype.wheelScrollObjects,f=[],b=0,c=e.length;c>b;b++)d=e[b],f.push(d.onWheelScroll(a));return f})}},{"../Dependencies/mozAddWheelListener":1}],6:[function(){String.prototype.contains=function(a){return-1!==this.indexOf(a)},String.prototype.startsWith=function(a){return this.slice(0,a.length)===a},String.prototype.endsWith=function(a){return this.slice(-a.length)===a},String.prototype.camelCase=function(){return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0===b?a.toLowerCase():a.toUpperCase()}).replace(/\s+/g,"")}},{}],7:[function(a,b){var c;a("./Extensions/DisplayObjectContainer.coffee"),a("./Extensions/PixiRenderer.coffee"),a("./Extensions/Array.coffee"),a("./Extensions/Object.coffee"),a("./Extensions/String.coffee"),c=function(){function b(){}return window.Gotham=b,b.Graphics={Renderer:a("./Modules/Renderer.coffee"),Scene:a("./Modules/Scene.coffee"),Container:a("./Modules/Graphics/Container.coffee"),Graphics:a("./Modules/Graphics/Graphics.coffee"),Polygon:a("./Modules/Graphics/Polygon.coffee"),Rectangle:a("./Modules/Graphics/Rectangle.coffee"),Sprite:a("./Modules/Graphics/Sprite.coffee"),Text:a("./Modules/Graphics/Text.coffee"),Texture:a("./Modules/Graphics/Texture.coffee"),Tools:a("./Modules/Graphics/Tools.coffee")},b.Controls={Button:a("./Modules/Controls/Button.coffee"),Slider:a("./Modules/Controls/Slider.coffee")},b.Pattern={MVC:{Controller:a("./Modules/Pattern/MVC/Controller.coffee"),View:a("./Modules/Pattern/MVC/View.coffee")}},b.Sound=a("./Modules/Sound.coffee"),b.Tween=a("./Modules/Tween.cs/Tween.coffee"),b.Util=a("./Util/Util.coffee"),b.Network=a("./Modules/Network.coffee"),b.Database=a("./Modules/Database.coffee"),b.GameLoop=new(a("./Modules/GameLoop.coffee")),b.Preload=new(a("./Modules/Preload.coffee")),b}(),b.exports=window.Gotham=c},{"./Extensions/Array.coffee":2,"./Extensions/DisplayObjectContainer.coffee":3,"./Extensions/Object.coffee":4,"./Extensions/PixiRenderer.coffee":5,"./Extensions/String.coffee":6,"./Modules/Controls/Button.coffee":8,"./Modules/Controls/Slider.coffee":9,"./Modules/Database.coffee":10,"./Modules/GameLoop.coffee":11,"./Modules/Graphics/Container.coffee":12,"./Modules/Graphics/Graphics.coffee":13,"./Modules/Graphics/Polygon.coffee":14,"./Modules/Graphics/Rectangle.coffee":15,"./Modules/Graphics/Sprite.coffee":16,"./Modules/Graphics/Text.coffee":17,"./Modules/Graphics/Texture.coffee":18,"./Modules/Graphics/Tools.coffee":19,"./Modules/Network.coffee":20,"./Modules/Pattern/MVC/Controller.coffee":21,"./Modules/Pattern/MVC/View.coffee":22,"./Modules/Preload.coffee":23,"./Modules/Renderer.coffee":24,"./Modules/Scene.coffee":25,"./Modules/Sound.coffee":26,"./Modules/Tween.cs/Tween.coffee":27,"./Util/Util.coffee":28}],8:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(a,c,d){var e,f,g;g=this,this._isToggled=!1,f=new Gotham.Graphics.Graphics,f.lineStyle(1,13882323),f.beginFill(0),f.drawRect(0,0,100,50),f.endFill(),f=f.generateTexture(),b.__super__.constructor.call(this,f),this.tint=0,this.width=c,this.height=d,this.setInteractive(!0),e=new Gotham.Graphics.Text(a,{font:"bold 40px Arial",fill:"#ffffff",align:"left"}),e.position.x=this.width/this.scale.x/2,e.position.y=this.height/this.scale.y/2,e.width=this.width/this.scale.x,e.height=this.height/this.scale.y,e.anchor={x:.5,y:.5},this.addChild(e),this.click=function(){return this._isToggled=!this._isToggled,this._isToggled?(this.tint=13882323,this.toggleOn()):(this.tint=0,this.toggleOff())}}return d(b,a),b.prototype.toggleOn=function(){},b.prototype.toggleOff=function(){},b}(Gotham.Graphics.Sprite),b.exports=c},{}],9:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(a,c){var d,e,f;b.__super__.constructor.apply(this,arguments),f=this,this.onProgress=null,this.progress=0,this.texture=c,this.tint=16776960,d=this.knob=new Gotham.Graphics.Sprite(a),d.width=this.height,d.height=this.height,d.setInteractive(!0),e=new Gotham.Graphics.Text("0%",{font:"bold 20px Arial",fill:"#ffffff",align:"left"}),e.x=this.width/2,e.y=this.height/2,e.anchor={x:.5,y:.5},this.addChild(e),d.mousedown=d.touchstart=function(a){return this.data=a,this.sx=a.getLocalPosition(this).x*this.scale.x,this.dragging=!0},d.mouseup=d.mouseupoutside=d.touchend=d.touchendoutside=function(){return this.data=null,this.dragging=!1},d.mousemove=d.touchmove=function(){var a,b;if(this.dragging){if(a=this.data.getLocalPosition(this.parent),b=a.x-this.sx,b*this.parent.scale.x>this.parent.width-this.width*this.parent.scale.x||0>b)return;if(this.x=b,f.progress=Math.round(f.calculateProgress(this.x)),e.setText(f.progress+"%"),f.onProgress)return f.onProgress(f.progress)}},this.addChild(d)}return d(b,a),b.prototype.calculateProgress=function(a){return a*this.scale.x/(this.width-this.knob.width*this.scale.x)*100},b}(Gotham.Graphics.Sprite),b.exports=c},{}],10:[function(a,b){var c;c=function(){function a(){return this.tables={},this}return a.prototype.createTable=function(a){return this.tables[a]=Taffy.taffy(),this.tables[a]},a.prototype.table=function(a){try{return this.tables[a]}catch(b){throw new ReferenceError("No table exists with that name: '"+a+"'")}},a}(),b.exports=c},{}],11:[function(a,b){var c;c=function(){function a(a){var b,c;c=this,this.renderer=function(){},this._tasks=[],this.fps=a?a:200,b=function(a){return requestAnimationFrame(b),c.update(a)},requestAnimationFrame(b)}return a.prototype.setRenderer=function(a){return this.renderer=a},a.prototype.update=function(a){var b,c,d,e,f,g;for(this.renderer(),Gotham.Tween.update(a),e=this._tasks,f=[],c=0,d=e.length;d>c;c++)b=e[c],g=b(),f.push(g?void 0:this._tasks.remove(b));return f},a.prototype.addTask=function(a){return this._tasks.push(a)},a}(),b.exports=c},{}],12:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}var c;return d(b,a),c=!1,b.prototype.create=function(){throw new Exception("Override Create Method")},b.prototype.update=function(){throw new Exception("Override Update Method")},b}(PIXI.DisplayObjectContainer),b.exports=c},{}],13:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){b.__super__.constructor.apply(this,arguments),this._dx=0,this._dy=0}return d(b,a),b}(PIXI.Graphics),b.exports=c},{}],14:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b}(PIXI.Polygon),b.exports=c},{}],15:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b}(PIXI.Rectangle),b.exports=c},{}],16:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(a){b.__super__.constructor.apply(this,arguments),this.hoverTexture=null,this.normalTexture=a}return d(b,a),b}(PIXI.Sprite),b.exports=c},{}],17:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(a,c,d,e){b.__super__.constructor.apply(this,arguments),this.setText(a),this.position.x=d,this.position.y=e,null!=c&&this.setStyle(c)}return d(b,a),b}(PIXI.Text),b.exports=c},{}],18:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b}(PIXI.Texture),b.exports=c},{}],19:[function(a,b){var c;c=function(){function a(){}return a.PolygonFromJSON=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;for(null==b&&(b=5),null==c&&(c={x:1,y:1}),n=new Array,h=f=0,i=a.length;i>f;h=++f){for(m=a[h],l=new Array,e=0,d=g=0,j=m.length;j>g;d=++g)k=m[d],e++%b===0&&l.push(new PIXI.Point(k[0]/(1*c.x),k[1]/(1*c.y)));n.push(new Gotham.Graphics.Polygon(l))}return n},a.PolygonToGraphics=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;for(m=[],c=[],a.constructor!==Array?m.push(a):m=a,g=e=0,h=m.length;h>e;g=++e){for(a=m[g],o=0,j=1e7,k=1e7,n=a.points,f=0,i=n.length;i>f;f++)l=n[f],o++%2===0?j>l&&(j=l):k>l&&(k=l);d=new Gotham.Graphics.Graphics,d.minX=j,d.minY=k,c.push(d),d.lineStyle(2,0,1),d.beginFill(16777215,.5),d.polygon=a,d.drawPolygon(a.points),null!=b&&(d.interactive=!0,d.buttonMode=!0,d.hitArea=new Gotham.Graphics.Polygon(a.points))}return c},a}(),b.exports=c},{}],20:[function(a,b){var c;c=function(){function a(a,b,c){var d;this.host=a,this.port=b,this.domain=c,this.webAPI={port:8085},this._isConnected=!1,this.connection=null,(null!=(d=!b)?d:this.port=8080)||(this.port=b)}return a.prototype.connect=function(a){var b,c;return b=this,c="http://"+this.host+":"+this.port+"/"+this.domain,$.getScript(c+"/hubs",function(){return b.connection=$.connection,console.log("SignalR: Hub information received..."),a(function(){return $.connection.hub.url=c,$.connection.hub.start().done(function(a){var b,c,d,e,f;for(console.log("SignalR: Connected to "+a.url+" with ID: "+a.id),e=Object.keys(a.proxies),f=[],b=0,d=e.length;d>b;b++)c=e[b],f.push("function"==typeof a.proxies[c].onConnect?a.proxies[c].onConnect(a.proxies[c]):void 0);return f})})})},a.prototype.getJSON=function(a,b){return console.log("Fetch JSON: http://"+this.host+":"+this.webAPI.port+a),$.getJSON("http://"+this.host+":"+this.webAPI.port+a,function(a){return b(a)})},a}(),b.exports=c},{}],21:[function(a,b){var c;c=function(){function a(a,b){var c;if(c=new a,!c._v)throw Error("View is missing in super constructor (Have your view inherited GothamGame.View ?");this._created=!1,this._processes=[],this.name=b,this.View=c,this.__network=null}return a.prototype.create=function(){throw new Error("create() must be overriden")},a.prototype.addProcess=function(a){return this._processes.push(a)},a.prototype.setNetwork=function(a){return console.log(a),console.log(this.name),this.__network=a.connection[this.name.camelCase()]},a.prototype.getNetwork=function(){return this.__network},a.prototype.addNetworkListener=function(a,b){return this.__network[a]=b},a.prototype.addNetworkCallback=function(a,b){return this.__network.client[a]=b},a}(),b.exports=c},{}],22:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){b.__super__.constructor.apply(this,arguments),this._v=!0,this._created=!1,this._processes=[]}return d(b,a),b.prototype.create=function(){throw new Error("create() must be overriden")},b.prototype.addProcess=function(a){return this._processes.push(a)},b}(Gotham.Graphics.Container),b.exports=c},{}],23:[function(a,b){var c;c=function(){function a(){this._Gotham=Gotham,this._totalObjects=0,this._loadedObjects=0,this._onLoad=function(){},this._onComplete=function(){},this.storage={audio:[],video:[],image:[],json:[]},this.jsonFromUrl=function(a,b){var c,d;return d=this,c=this.storage,Gotham.Util.Ajax.GET(a,function(a){return c.json[b]=a,d._loadedObjects++,d._onLoad(this.src,this._name,d._loadedObjects/d._totalObjects*100),d.isPreloadComplete()?d._onComplete():void 0})},this.imageFromUrl=function(a,b){var c,d;return d=this,c=Gotham.Graphics.Texture.fromImage(a),c._name=b,c.addEventListener("update",function(){return this.addEventListener("update",function(){}),d._loadedObjects++,d._onLoad(this.src,this._name,d._loadedObjects/d._totalObjects*100),d.isPreloadComplete()?d._onComplete():void 0})},this.soundFromUrl=function(a,b,c){var d,e,f,g;return g=this,e={urls:[a],onload:function(){return g._loadedObjects++,g._onLoad(this._src,this._name,g._loadedObjects/g._totalObjects*100),g.isPreloadComplete()?g._onComplete():void 0}},null!=c&&e.merge(c),d=new Howl(e),f=new Gotham.Sound(d),f._name=b,f}}return a.prototype.onLoad=function(a){return this._onLoad=a},a.prototype.onComplete=function(a){return this._onComplete=a},a.prototype.isPreloadComplete=function(){return this._loadedObjects/this._totalObjects*100===100},a.prototype.image=function(a,b){return this._totalObjects++,this.getType("image")[b]=this.imageFromUrl(a,b)},a.prototype.mp3=function(a,b,c){return this._totalObjects++,this.getType("audio")[b]=this.soundFromUrl(a,b,c)},a.prototype.json=function(a,b){return this._totalObjects++,this.getType("json")[b]=this.jsonFromUrl(a,b)},a.prototype.fetch=function(a,b){return null==b?(console.log("Optimization potential detected: Define Type"),Gotham.Util.SearchTools.FindKey(this.storage,a)):this.getType(b)[a]},a.prototype.getType=function(a){switch(a){case"image":return this.storage.image;case"audio":return this.storage.audio;case"json":return this.storage.json;default:throw new Error("Format Not Supported, Preload")}return this.storage},a}(),b.exports=c},{}],24:[function(a,b){var c;c=function(){function a(a,b,c,d){var e,f,g;g=this,this.pixi=PIXI.autoDetectRenderer(a,b,c),window.renderer=this,this.pixi.setWheelScroll(!0),null!=d&&(this.pixi.view.style.width=window.innerWidth+"px",this.pixi.view.style.height=window.innerHeight+"px",window.addEventListener("resize",function(){return g.pixi.view.style.width=window.innerWidth+"px",g.pixi.view.style.height=window.innerHeight+"px"})),f=new Gotham.Graphics.Scene(0,!0),e=new Gotham.Graphics.Text("Gotham Game Engine",{font:"35px Arial",fill:"white",align:"left"},960,540),e.anchor={x:.5,y:.5},f.addChild(e),this.pixi.stage=f,this.scenes={root:this.pixi.stage},document.body.appendChild(this.pixi.view),Gotham.GameLoop.setRenderer(function(){return renderer.pixi.render(renderer.pixi.stage)})}return a.prototype.setScene=function(a){var b;return b=this.scenes[a],this.pixi.stage=b},a.prototype.addScene=function(a,b){return b._renderer=this,this.scenes[a]=b},a}(),b.exports=c},{}],25:[function(a,b){var c,d=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},e={}.hasOwnProperty;c=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.__children={},this.create()}return d(b,a),b.prototype.create=function(){},b.prototype.getObject=function(a){return this.__children[a]},b.prototype.addObject=function(a){if(this.addChild(a.View),a.scene=this,a.View.scene=this,a.View._created||a.View.create(),a._created||a.create(),a.View._created=!0,a._created=!0,!a.name)throw Error("Missing @name property!");return this.__children[a.name]=a,a},b.prototype.removeObject=function(a){return delete this.__children[a.name],a.scene=null,a.View.scene=null,a._created=!1,a.View._created=!1,this.removeChild(a.View)},b}(PIXI.Stage),b.exports=c},{}],26:[function(a,b){var c,d;c=a("../dependencies/howler.js"),d=function(){function a(a){this._sound=a}return a.prototype.play=function(){return this._sound.play()},a.prototype.stop=function(){return this._sound.stop()},a.prototype.pause=function(){return this._sound.pause()},a.prototype.volume=function(a){return this._sound.volume(a)},a.prototype.forward=function(a){var b;return b=this._sound.pos(),this._sound.pos(b+a)},a.prototype.backward=function(a){var b;return b=this._sound.pos(),this._sound.pos(b-a)},a.prototype.mute=function(){return this._sound.mute()},a.prototype.unmute=function(){return this._sound.unmute()},a.prototype.loop=function(a){return this._sound.loop(a)},a}(),b.exports=d},{"../dependencies/howler.js":33}],27:[function(require,module,exports){var Tween;Tween=function(){function Tween(a){this._object=a,this._properties=[],this._tweenChain=[],this._startDelay=0,this._easing=Tween.Easing.Linear.None,this._interpolation=Tween.Interpolation.Linear,this._onUpdate=null,this._onComplete=null,this._onStart=null,this._started=!1,this._paused=!1,this._complete=!1,this._remainingRuns=0,Tween._objects.push(this)}return Tween._objects=[],Tween._oldObjects=[],Tween._currentTime=0,Tween.prototype.getTweenChain=function(){return this._tweenChain},Tween.prototype.start=function(){return this._onStart(this._object)},Tween.prototype.stop=function(){},Tween.prototype.pause=function(){},Tween.prototype.startDelay=function(a){return this._startDelay=a},Tween.prototype.easing=function(a){return this._easing=a},Tween.prototype.to=function(a,b){var c,d,e,f,g,h;for(e={property:a,duration:b,startTime:null,endTime:null,inited:!1,type:"translate"},this._tweenChain.push(e),g=Tween.flattenKeys(a),h=[],c=0,d=g.length;d>c;c++)f=g[c],h.push(this._properties.push(f));return h},Tween.prototype.delay=function(a){var b;if("number"!=typeof a)throw new Error("Time was not a number!");return b={duration:a,startTime:null,endTime:null,type:"delay"},this._tweenChain.push(b)},Tween.prototype.repeat=function(a){return this._remainingRuns=a},Tween.prototype.addCutsomProperty=function(a){return this._properties.push(a)},Tween.prototype.addCutsomProperties=function(a){var b,c,d,e;for(e=[],b=0,c=a.length;c>b;b++)d=a[b],e.push(this.addProperty(d));return e},Tween.prototype.onUpdate=function(a){return this._onUpdate=a},Tween.prototype.onComplete=function(a){return this._onComplete=a},Tween.prototype.onStart=function(a){return this._onStart=a},Tween.update=function(time){var current,elapsed,end,endTime,j,key,l,lastItem,len,len1,objects,prop,property,ref,results,start,startTime,target,tween,tweenObject,value;if(Gotham.Tween._currentTime=time,objects=Tween._objects,objects.length>0){for(results=[],j=0,len=objects.length;len>j;j++)if(tweenObject=objects[j],void 0!==tweenObject&&!(time<tweenObject._startTime||tweenObject._complete))if(tweenObject._tweenChain.length>0){if(tween=tweenObject._tweenChain[0],!tween.inited){for(tween.startTime=time,tween.endTime=tween.startTime+tween.duration,tween.startPos={},ref=tweenObject._properties,l=0,len1=ref.length;len1>l;l++)property=ref[l],key=property.split(".")[0],value=tweenObject._object[key],tween.startPos[key]=value;tween.inited=!0}if(time>tween.endTime&&(tweenObject._tweenChain.shift(),tweenObject._remainingRuns-->0&&(lastItem=tweenObject._tweenChain[tweenObject._tweenChain.length-1],tween.startTime=null,tween.endTime=null,tween.inited=!1,tweenObject._tweenChain.push(tween))),"delay"===tween.type)continue;startTime=tween.startTime,endTime=tween.endTime,start=tween.startPos,end=tween.property,elapsed=(time-startTime)/tween.duration,elapsed=elapsed>1?1:elapsed,value=tweenObject._easing(elapsed),results.push(function(){var len2,o,ref1,results1;for(ref1=tweenObject._properties,results1=[],o=0,len2=ref1.length;len2>o;o++)prop=ref1[o],eval("tweenObject._object."+prop+" = start."+prop+" + ( end."+prop+" - start."+prop+" ) * value"),current=eval("tweenObject._object."+prop),target=eval("end."+prop),results1.push(current-target===0?tween.endTime=time-1:void 0);return results1}())}else tweenObject._complete=!0,Tween._objects.remove(tweenObject),results.push(Tween._oldObjects.push(tweenObject));return results}},Tween.flattenKeys=function(a,b,c){var d;return b=b||".",c=c||2,(d=function(a,e,f,g){return g>c?void 0:(g++,"object"==typeof a&&a?Object.keys(a).forEach(function(b){return e.push(b),d(a[b],e,f,g),e.pop()}):f.push(e.join(b)),f)})(a,[],[],0)},Tween.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c,d;return d=void 0,b=.1,c=.4,0===a?0:1===a?1:(!b||1>b?(b=1,d=c/4):d=c*Math.asin(1/b)/2*Math.PI,-(b*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/c)))},Out:function(a){var b,c,d;return d=void 0,b=.1,c=.4,0===a?0:1===a?1:(!b||1>b?(b=1,d=c/4):d=c*Math.asin(1/b)/2*Math.PI,b*Math.pow(2,-10*a)*Math.sin(2*(a-d)*Math.PI/c)+1)},InOut:function(a){var b,c,d;return d=void 0,b=.1,c=.4,0===a?0:1===a?1:(!b||1>b?(b=1,d=c/4):d=c*Math.asin(1/b)/2*Math.PI,(a*=2)<1?-.5*b*Math.pow(2,10*(a-=1))*Math.sin(2*(a-d)*Math.PI/c):b*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-d)*Math.PI/c)*.5+1)}},Back:{In:function(a){var b;return b=1.70158,a*a*((b+1)*a-b)},Out:function(a){var b;return b=1.70158,--a*a*((b+1)*a+b)+1},InOut:function(a){var b;return b=2.5949095,(a*=2)<1?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)}},Bounce:{In:function(a){return 1-Tween.Easing.Bounce.Out(1-a)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*Tween.Easing.Bounce.In(2*a):.5*Tween.Easing.Bounce.Out(2*a-1)+.5}}},Tween.Interpolation={Linear:function(a,b){var c,d,e,f;return f=a.length-1,c=f*b,e=Math.floor(c),d=Tween.Interpolation.Utils.Linear,0>b?d(a[0],a[1],c):b>1?d(a[f],a[f-1],f-c):d(a[e],a[e+1>f?f:e+1],c-e)},Bezier:function(a,b){var c,d,e,f,g;for(c=0,f=a.length-1,g=Math.pow,d=Tween.Interpolation.Utils.Bernstein,e=void 0,e=0;f>=e;)c+=g(1-b,f-e)*g(b,e)*a[e]*d(f,e),e++;return c},CatmullRom:function(a,b){var c,d,e,f;return f=a.length-1,c=f*b,e=Math.floor(c),d=Tween.Interpolation.Utils.CatmullRom,a[0]===a[f]?(0>b&&(e=Math.floor(c=f*(1+b))),d(a[(e-1+f)%f],a[e],a[(e+1)%f],a[(e+2)%f],c-e)):0>b?a[0]-(d(a[0],a[0],a[1],a[1],-c)-a[0]):b>1?a[f]-(d(a[f],a[f],a[f-1],a[f-1],c-f)-a[f]):d(a[e?e-1:0],a[e],a[e+1>f?f:e+1],a[e+2>f?f:e+2],c-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c;return c=Tween.Interpolation.Utils.Factorial,c(a)/c(b)/c(a-b)},Factorial:function(){var a;return a=[1],function(b){var c,d;if(d=1,c=void 0,a[b])return a[b];for(c=b;c>1;)d*=c,c--;return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){var f,g,h,i;return h=.5*(c-a),i=.5*(d-b),f=e*e,g=e*f,(2*b-2*c+h+i)*g+(-3*b+3*c-2*h-i)*f+h*e+b}}},Tween}(),module.exports=Tween},{}],28:[function(a,b){var c;c=function(){function b(){}return b.Ajax=a("./modules/Ajax.coffee"),b.SearchTools=a("./modules/SearchTools.coffee"),b.Compression=a("./modules/Compression.coffee"),b.Geocoding=a("./modules/Geocoding.coffee"),b}(),b.exports=c},{"./modules/Ajax.coffee":29,"./modules/Compression.coffee":30,"./modules/Geocoding.coffee":31,"./modules/SearchTools.coffee":32}],29:[function(a,b){var c;c=function(){function a(){}return a.getXmlDoc=function(){var a;return a=null,a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},a.GET=function(b,c){var d;return d=a.getXmlDoc(),d.open("GET",b,!0),d.onreadystatechange=function(){return 4===d.readyState&&200===d.status?c(JSON.parse(d.response),d):void 0},d.send()},a}(),b.exports=c},{}],30:[function(a,b){var c;c=function(){function a(){}return a.prototype.GZIP={decompress:function(a){var b,c;return b=new Zlib.Zlib.Gunzip(atob(a)),c=b.decompress()}},a}(),b.exports=new c},{}],31:[function(a,b){var c;c=function(){function a(){}return a.getCountry=function(a,b){return window.CRG.country_reverse_geocoding().get_country(a,b)},a.CalculateDistance=function(a,b){var c,d,e,f,g,h,i;return c=6371e3,f=a.lat*Math.PI/180,g=b.lat*Math.PI/180,h=(b.lat-a.lat)*Math.PI/180,i=(b.lng-a.lng)*Math.PI/180,d=Math.sin(h/2)*Math.sin(h/2)+Math.cos(f)*Math.cos(g)*Math.sin(i/2)*Math.sin(i/2),e=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),c*e},a}(),b.exports=c},{}],32:[function(a,b){var c;c=function(){function a(){}return a.FindKey=function(a,b,c){var d,e,f,g,h;for(null==c&&(c=7),h=[],h.push(a),f=void 0,e=0;h.length&&!f;){if(e++>c)return null;if(g=h.shift(),b in g&&(console.log("boud!"),f=g[b]),"object"==typeof g)for(d in g)h.push(g[d])}return f},a}(),b.exports=c},{}],33:[function(a,b,c){!function(){var a={},b=null,d=!0,e=!1;try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:d=!1}catch(f){d=!1}if(!d)if("undefined"!=typeof Audio)try{new Audio}catch(f){e=!0}else e=!0;if(d){var g="undefined"==typeof b.createGain?b.createGainNode():b.createGain();g.gain.value=1,g.connect(b.destination)}var h=function(a){this._volume=1,this._muted=!1,this.usingWebAudio=d,this.ctx=b,this.noAudio=e,this._howls=[],this._codecs=a,this.iOSAutoEnable=!0};h.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,d&&(g.gain.value=a);for(var c in b._howls)if(b._howls.hasOwnProperty(c)&&b._howls[c]._webAudio===!1)for(var e=0;e<b._howls[c]._audioNode.length;e++)b._howls[c]._audioNode[e].volume=b._howls[c]._volume*b._volume;return b}return d?g.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,d&&(g.gain.value=a?0:b._volume);for(var c in b._howls)if(b._howls.hasOwnProperty(c)&&b._howls[c]._webAudio===!1)for(var e=0;e<b._howls[c]._audioNode.length;e++)b._howls[c]._audioNode[e].muted=a},codecs:function(a){return this._codecs[a]},_enableiOSAudio:function(){var a=this;if(!b||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var d=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=d,e.connect(b.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var i=null,j={};e||(i=new Audio,j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")
});var k=new h(j),l=function(a){var c=this;c._autoplay=a.autoplay||!1,c._buffer=a.buffer||!1,c._duration=a.duration||0,c._format=a.format||null,c._loop=a.loop||!1,c._loaded=!1,c._sprite=a.sprite||{},c._src=a.src||"",c._pos3d=a.pos3d||[0,0,-.5],c._volume=void 0!==a.volume?a.volume:1,c._urls=a.urls||[],c._rate=a.rate||1,c._model=a.model||null,c._onload=[a.onload||function(){}],c._onloaderror=[a.onloaderror||function(){}],c._onend=[a.onend||function(){}],c._onpause=[a.onpause||function(){}],c._onplay=[a.onplay||function(){}],c._onendTimer=[],c._webAudio=d&&!c._buffer,c._audioNode=[],c._webAudio&&c._setupAudioNode(),"undefined"!=typeof b&&b&&k.iOSAutoEnable&&k._enableiOSAudio(),k._howls.push(c),c.load()};if(l.prototype={load:function(){var a=this,b=null;if(e)return void a.on("loaderror");for(var c=0;c<a._urls.length;c++){var d,f;if(a._format)d=a._format;else{if(f=a._urls[c],d=/^data:audio\/([^;,]+);/i.exec(f),d||(d=/\.([^.]+)$/.exec(f.split("?",1)[0])),!d)return void a.on("loaderror");d=d[1].toLowerCase()}if(j[d]){b=a._urls[c];break}}if(!b)return void a.on("loaderror");if(a._src=b,a._webAudio)m(a,b);else{var g=new Audio;g.addEventListener("error",function(){g.error&&4===g.error.code&&(h.noAudio=!0),a.on("loaderror",{type:g.error?g.error.code:0})},!1),a._audioNode.push(g),g.src=b,g._pos=0,g.preload="auto",g.volume=k._muted?0:a._volume*k.volume();var i=function(){a._duration=Math.ceil(10*g.duration)/10,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play(),g.removeEventListener("canplaythrough",i,!1)};g.addEventListener("canplaythrough",i,!1),g.load()}return a},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f=e._pos>0?e._pos:d._sprite[a][0]/1e3,g=0;d._webAudio?(g=d._sprite[a][1]/1e3-e._pos,e._pos>0&&(f=d._sprite[a][0]/1e3+f)):g=d._sprite[a][1]/1e3-(f-d._sprite[a][0]/1e3);var h,i=!(!d._loop&&!d._sprite[a][2]),j="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:j,sprite:a,loop:i};h=setTimeout(function(){!d._webAudio&&i&&d.stop(b.id).play(a,b.id),d._webAudio&&!i&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0,d._clearEndTimer(b.id)),d._webAudio||i||d.stop(b.id),d.on("end",j)},1e3*g),d._onendTimer.push({timer:h,id:b.id})}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=j,e.paused=!1,p(d,[i,l,m],j),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,f,g):e.bufferSource.start(0,f,g)}else{if(4!==e.readyState&&(e.readyState||!navigator.isCocoonJS))return d._clearEndTimer(j),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.readyState=4,e.id=j,e.currentTime=f,e.muted=k._muted||e.muted,e.volume=d._volume*k.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(j),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.pause(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=b.pos(null,a),b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else c.pause();return b.on("pause"),b},stop:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.stop(a)}),b;b._clearEndTimer(a);var c=a?b._nodeById(a):b._activeNode();if(c)if(c._pos=0,b._webAudio){if(!c.bufferSource||c.paused)return b;c.paused=!0,"undefined"==typeof c.bufferSource.stop?c.bufferSource.noteOff(0):c.bufferSource.stop(0)}else isNaN(c.duration)||(c.pause(),c.currentTime=0);return b},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.muted=!0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.muted=!1),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*k.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):d._webAudio?e._pos+(b.currentTime-d._playStart):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c),f.panner.panningModel=e._model||"HRTF")}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;if(b._webAudio)e=b._setupAudioNode(),a(e);else{b.load(),e=b._audioNode[b._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",g=function(){e.removeEventListener(f,g,!1),a(e)};e.addEventListener(f,g,!1)}}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){for(var b=this,c=0,d=0;d<b._onendTimer.length;d++)if(b._onendTimer[d].id===a){c=d;break}var e=b._onendTimer[c];e&&(clearTimeout(e.timer),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(g),c[d].panner=b.createPanner(),c[d].panner.panningModel=a._model||"equalpower",c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){var c=this,d=c["_on"+a],e=b?b.toString():null;if(e){for(var f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}}else c["_on"+a]=[];return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||(b.stop(c[d].id),b.on("end",c[d].id)),b._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<b._onendTimer.length;d++)clearTimeout(b._onendTimer[d].timer);var e=k._howls.indexOf(b);null!==e&&e>=0&&k._howls.splice(e,1),delete a[b._src],b=null}},d)var m=function(b,c){if(c in a)return b._duration=a[c].duration,void o(b);if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),e=new Uint8Array(d.length),f=0;f<d.length;++f)e[f]=d.charCodeAt(f);n(e.buffer,b,c)}else{var g=new XMLHttpRequest;g.open("GET",c,!0),g.responseType="arraybuffer",g.onload=function(){n(g.response,b,c)},g.onerror=function(){b._webAudio&&(b._buffer=!0,b._webAudio=!1,b._audioNode=[],delete b._gainNode,delete a[c],b.load())};try{g.send()}catch(h){g.onerror()}}},n=function(c,d,e){b.decodeAudioData(c,function(b){b&&(a[e]=b,o(d,b))},function(){d.on("loaderror")})},o=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},p=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:k,Howl:l}}),"undefined"!=typeof c&&(c.Howler=k,c.Howl=l),"undefined"!=typeof window&&(window.Howler=k,window.Howl=l)}()},{}]},{},[7]);